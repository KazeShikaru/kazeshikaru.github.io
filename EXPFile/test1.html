<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" type="text/css" href="UBE.css" media="all">
</head>
<body onload="startGame()" onresize="resize()">
    
    
      
    <audio autoplay id = "sound1" oncanplay="loaded()">
        <source id = "soundSource1" src="music/Emotions.mp3" type="audio/mpeg">
    </audio>
    <audio autoplay id = "sound2" oncanplay="loaded()">
        <source id = "soundSource2" src="music/Heal1.ogg" type="audio/mpeg">
    </audio>
    
    <p id="demo" style="color:white">Soup</p>
    <canvas id="myCanvas" width="971" height="600"></canvas>
    <!--<script src="main.js"></script>-->
    <script src="screenElement.js"></script>
    <script src="variables.js"></script>
    <script>
    ///////////////////////////////
    //<audio style="display:none" id="f2" allow="autoplay"  src="music/Emotions.mp3" autoplay>
    
    var EFsound=0;   
    var loading = 0;
    
    
    ////////////////////////////////////////////
    var wall = ScrEle(-981,0,981,600,"img/ButtonPurple.jpg","s1");
    
    var currentScreen = screen1;
    var imoige = elem1_1.image;
    //imoige.src = "img/Map1.png";
    /////////////////////////////////////////////
    document.getElementById("demo").innerHTML = "sp"+elem1_1.locX+elem1_1.checkClicked(1,1);
    
    
    
    var soup = document.getElementById("myCanvas");
    var rect = soup.getBoundingClientRect();
    var ctx = soup.getContext("2d");
    soup.addEventListener("mousedown",function(event){ 
        if(loading>1){
        checkWhatClicked(event);}
                                                     });
    
        
    function clearC(){
        ctx.clearRect(0, 0, currentScreen[0].width, currentScreen[0].height);
    }
    
        
    setInterval(function(){
        clearC();
        
        wall.locX-=30;
        //ctx.drawImage(imoige, 300, 100);
        
        for(i = 0; i<currentScreen.length;i++){
            currentScreen[i].update(ctx);
        }
        
        
        
        wall.update(ctx);
    },20);
   
    function checkWhatClicked(event){
        document.getElementById("demo").innerHTML = event.clientX;
        if(wall.locX<-987){
        for(i = 0; i<currentScreen.length;i++){
            if(currentScreen[i].checkClicked(event.clientX-rect.left,event.clientY-rect.top)){
            document.getElementById("demo").innerHTML += "sp"+elem1_1.locX+elem1_1.checkClicked(1,1);
                if(currentScreen[i].name.substring(0,2)=="s1"){
               
                    switchScreen(1);
                    transition()
                    
                    return;
                }else if(currentScreen[i].name=="s2"){
                
                    switchScreen(0);
                    transition()
                    
                    return;
                }else if(currentScreen[i].name=="s3"){
                
                    switchScreen(2);
                    transition()
                    
                    return;
                }else if(currentScreen[i].name=="s3a"){
                
                    switchScreen(2);
                   
                    
                    return;
                }else if(currentScreen[i].name=="s4"){
                
                    switchScreen(3);
                    
                    return;
                }else if(currentScreen[i].name=="s5"){
                
                    switchScreen(4);
                    
                    
                    return;
                }else if(currentScreen[i].name=="s6"){
                
                    switchScreen(5);
                    
                    
                    return;
                }
        }
        }
        }
        
    }
        function transition(){
            wall.locX=0;
        }
        
    function resize(){
        rect = document.getElementById("myCanvas").getBoundingClientRect();

    }
    function loaded(){
        if(loading==1){
           text1_1.text="Loaded";
            text2_1.text="Loap";
        }
            loading+=1;
        
    }
    
    function switchScreen(nextScreen){
        var music = document.getElementById("sound2");
        switch(nextScreen){
            case 0:currentScreen=screen1;
                music.src="music/Heal1.ogg";
                switchMusic(0);
                break;
            case 1:currentScreen=screen2;
                music.src="music/Heal2.ogg";
                switchMusic(1);
                break;
            case 2:currentScreen=screen3;
                music.src="music/Heal3.ogg";
                switchMusic(2);
                break;
            case 3:currentScreen=screen4;
                music.src="music/Heal4.ogg";
                switchMusic(2);
                break;
            case 4:currentScreen=screen5;
                music.src="music/Heal5.ogg";
                switchMusic(2);
                break;
            case 5:currentScreen=screen6;
                music.src="music/Heal6.ogg";
                switchMusic(2);
                break;
        }
    }
    function playSoundEffect(number){
        if(EFsound==0){
            switch(numer){
                    
                    
                    
                    
            }
            
        }
    }
    function switchMusic(number){
        var music = document.getElementById("sound1");
        
        
        var musicSource = document.getElementById("soundSource1");
        switch(number){
            case 0:music.src="music/Emotions.mp3";
                
                break;
            case 1:music.src="music/01.mp3";
                
                break;
            case 2:music.src="music/02.mp3";
                
                break;
               
               
        }
        
        
    }
        
    </script>>


</body>
</html>
